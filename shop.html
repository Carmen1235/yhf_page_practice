<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport"/>
	    <meta content="yes" name="apple-mobile-web-app-capable"/>
	    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
	    <meta content="telephone=no" name="format-detection"/>
	    <link rel="stylesheet" href="css/ydui.css?rev=a4b9d6e8c9c1cae7ea4676f911682af7"/>
	   <!-- <link rel="stylesheet" href="css/tiku.css" />-->
	    <link rel="stylesheet" href="css/index.css"/>
	    <link rel="stylesheet" href="css/shop.css" />
	    
	</head>
	<body>
	<div class="page shop page_shop active" id="shop_index">
	<div class="g-flexview">
		<div class="g-scrollview">
			<div class="page-main">
				<!--左侧滑动界面-->
				<div class="page-left category_list">
					<div data-cid="0" class="item"><div class="titles">全部</div></div>
					<div class="item active">
						<div class="titles crt ">医学</div>
						<ul>
							<li class="">
								<i class="points"></i><span>助理医师</span>
							</li>
							<li class="">
								<i class="points"></i><span>执业医师</span>
							</li>
							<li class="">
								<i class="points"></i><span>医师考研</span>
							</li>
							<li class="">
								<i class="points"></i><span>医学三基</span>
							</li>
						</ul>
					</div>
					<div class="item">
						<div class="titles">护理</div>
						<ul>
							<li class="">
								<i class="points" data-modle="1"></i><span>副高</span>
							</li>
							<li class="">
								<i class="points" data-modle="1"></i><span>正高</span>
							</li>
						</ul>
					</div>
					<div class="item">
						<div class="titles">药学</div>
						<ul>
							<li class="">
								<i class="points" data-modle="1"></i><span>西药</span>
							</li>
							<li class="">
								<i class="points"></i><span>中药</span>
							</li>
						</ul>
					</div>
					<div class="item">
						<div class="titles">建筑</div>
					</div>
					<div class="item">
						<div class="titles">财会</div>
					</div>
					
				</div>
				<!--右侧滑动界面-->
				<div class="page-right id_exam_list">
					<!--三级分类选择-->
					<div class="navbox">
						<ul class="nav third_list">
							<li class="active">全部</li>
							<li>副高(中医)</li>
							<li>副高(西医)</li>
							<li>副高(中西医)</li>
						</ul>
					</div>
					<div class="nav-box">
                        <ul class="tag_list">
                        	<li class="active" data-token="">全部</li> 
                        	<li data-model="ebook">考点</li>
                        	<li data-model="tiku">题库</li>
                        </ul>
                    </div>
                    <!--右侧显示内容--> 
                    <div class="searchlist-normal" data-load="1">
                        <ul class="shop_list">
                        	<li page="1" class="normal-list">   
                        		<a class=" J_ping">       
                        			<div class="pro-icon" data-model="tiku">
                        				<i></i>
                        			</div>       
                        			<div class="product-info-box">       
                        				<div class="product-name">
                        					<span>2019年2019年易哈佛副高（心电学技术）VIP题库(手机、电脑通用)【10年考试经验结晶，轻松提高80%考试通过率】</span>
                        				</div>       
                        				<div class="product-price-m">
                        					分享价：<span class="big-price">¥160</span>
                        				</div>       
                        				<div class="gray-pro-info">
                        					<span class="new-adpush">已购人数：1441人</span>
                        				</div>       
                        			</div>   
                        		</a>
                        	</li>
                        	<li page="1" class="normal-list">   
                        		<a class=" J_ping">       
                        			<div class="pro-icon" data-model="ebook">
                        				<i></i>
                        			</div>       
                        			<div class="product-info-box">       
                        				<div class="product-name">
                        					<span>2019年副高（放射卫生）提分必看考点2140条【超快记忆】</span>
                        				</div>       
                        				<div class="product-price-m">
                        					分享价：<span class="big-price">¥29</span>
                        				</div>       
                        				<div class="gray-pro-info">
                        					<span class="new-adpush">已购人数：3677人</span>
                        				</div>       
                        			</div>   
                        		</a>
                        	</li>
                        </ul>
                    </div>
					
					<ul class="item exam_list scroll_lists"> 
						<li class="list_li">
							<a href="javascript:;" data-cid="111"><p>助理医师</p>
								<div class="tags">
									<span data-model="goods">小抄</span>
									<span data-model="exam">套卷</span>
									<span data-model="tiku">题库</span>
									<span data-model="video">视频</span>
									<span data-model="ebook">考点</span>
								</div>
							</a>
						</li> 
						<li class="list_li">
							<a href="javascript:;" data-cid="113"><p>执业医师</p>
								<div class="tags">
									<span data-model="goods">小抄</span>
									<span data-model="exam">套卷</span>
									<span data-model="tiku">题库</span>
									<span data-model="video">视频</span>
									<span data-model="ebook">考点</span>
								</div>
							</a>
						</li> 
						<li class="list_li">
							<a href="javascript:;" data-cid="112"><p>医师考研</p>
								<div class="tags">
									<span data-model="goods">小抄</span>
									<span data-model="exam">套卷</span>
									<span data-model="tiku">题库</span>
									<span data-model="video">视频</span>
									<span data-model="ebook">考点</span>
								</div>
							</a>
						</li> 
						<li class="list_li">
							<a href="javascript:;" data-cid="112"><p>医学三基</p>
								<div class="tags">
									<span data-model="goods">小抄</span>
									<span data-model="exam">套卷</span> 
									<span data-model="tiku">题库</span>
									<span data-model="video">视频</span>
									<span data-model="ebook">考点</span>
								</div>
							</a>
						</li> 
					</ul>
				</div>
				<!--右侧滑动界面end-->
			</div>
		</div>
		<!--估分-->
		<div class="gufen_box active">
			<img src="img/gufen.png" />
		</div>
		<!--分析界面-->
		<div class="m-actionsheet first_foot">
	        <div class="tops_box">
	            <div class="tops"></div>
	        </div>
	        <div class="heads">
	            <div class="head">
	                <div class="">
	                    <img class="gufen_img" src="img/fugen.gif" alt="">
	                </div>
	                <div class="bottom text-center">数据分析中...</div>
	            </div>
	        </div>
	        <div class="foot">
	            <div class="item active">
	                <div class="lefts">2018年副高（急救护理）通过率</div>
	                <div class="rightsa">待分析</div>
	            </div>
	            <div class="item">
	                <div class="lefts">近30天做题量和正确率</div>
	                <div class="rightsa">待分析</div>
	            </div>
	            <div class="item">
	                <div class="lefts">精选资料阅读时长</div>
	                <div class="rightsa">待分析</div>
	            </div>
	            <div class="item">
	                <div class="lefts">综合得分评估</div>
	                <div class="rightsa">待分析</div>
	            </div>
	            <div class="item">
	                <div class="lefts">今年该考试报名人数</div>
	                <div class="rightsa">待分析</div>
	            </div>
	        </div>
	    </div>
		
		<!--显示加actionsheet-toggle的class--------分析结果-->
		<div class="m-actionsheet second_foot">
			<div class="tops_box">
				<div class="tops"></div>
			</div>
			<div class="head">
				<div>通过率可进一步提升</div>
				<div class="gold">根据你的做题情况和正确率计算得出</div>
			</div>
			<div class="mains">
				<div class="text">
					<div class="text-title">你已完成50题，综合得分4</div>
					<div class="txt">
						建议多练习巩固考点可提升53%通过率
					</div>
				</div>
				<div class="middle flex">
					<div class="flex img_box">
						<div class="top">
							<div class="nums red">25%</div>
							<img src="img/gufen_box1.png" />
						</div>
						<div class="txt">你的预测通过率</div>
					</div>
					<div class="mids">
						<img src="img/gufen_jiantou.png" alt="">
					</div>
					<div class="img_box flex">
						<div class="top">
							<div class="nums red">25%</div>
							<img src="img/gufen_box2.png" />
						</div>
						<div class="txt">采用提升建议</div>
					</div>
				</div>
				<div class="bottom">
					<div class="btns see_btn">查看提升建议</div>
				</div>
			</div>
		</div>
		
		<footer class="m-tabbar ziliao-footer" style="border-top: 1px solid #ebebeb;">
	        <a href="index.html" class="tabbar-item">
	            <span class="tabbar-icon">
	                <i class="ziliaoicon icon-leaf"></i>
	                
	            </span>
	            <span class="tabbar-txt">题库</span>
	        </a>
	        <a href="kaodian.html" class="tabbar-item">
	            <span class="tabbar-icon">
	                <i class="i-main icon-notes"></i>
	            </span>
	            <span class="tabbar-txt">考点</span>
	        </a>
	        <a href="shop.html" class="tabbar-item tabbar-active act">
	            <span class="tabbar-icon">
	                <i class="icon-shopcart-outline"></i>
	            </span>
	            <span class="tabbar-txt">商城</span>
	        </a>
	        <a href="#" class="tabbar-item">
	            <span class="tabbar-icon">
	                <i class="i-main icon-download"></i>
	            </span>
	            <span class="tabbar-txt">微课</span>
	        </a>
	        <a href="user.html" class="tabbar-item">
	            <div class="tabbar-icon">
	                <i class="icon-ucenter-outline"></i>
	                <!--<span class="tabbar-dot"></span>-->
	            </div>
	            <div class="tabbar-txt">我的</div>
	        </a>
	    </footer>
	</div>
	<!--<div class="mask-black"></div>-->
	
	
	</div>
	<script src="js/jquery-2.0.0.min.js"></script>
	<script src="js/ydui.flexible.js"></script>
	<script src="js/ydui.js"></script>	
	<script>
		
	//初始化隐藏查询栏目
	$(".item ul").hide();
	$(".item.active ul").show();
	var _rightContent = $(".shop_list").html();
	
	//三级分类点击事件
	$('body').on('click', '#shop_index .third_list li', function() {
		var _this = $(this);
		$(".scroll_lists").removeClass("none");//显示右侧内容
		$("#shop_index .nav-box").hide();//隐藏商城分类
		$("#shop_index .searchlist-normal").hide();//隐藏商城内容
		_this.addClass("active").siblings().removeClass("active");
		
		if(_this.text() == "全部"){
			//放入已有的全部数据.category_list .item li
			arrData($("#shop_index .third_list li"),"","");
		}else{
			arrData(_this,"","");
		}
	})
	
	//右侧内容的点击事件
	$('body').on('click', '.list_li', function() {
        $("#shop_index .nav-box").show();//展示商城分类
		$("#shop_index .searchlist-normal").show();//展示商城内容
		$("#shop_index .scroll_lists").addClass("none");//隐藏右侧内容 
		//每次点击右侧的内容初始化到全部点击
		$(".nav-box li").eq(0).addClass("active").siblings().removeClass("active");
		$(".shop_list").html(_rightContent);//初始化的时候展示全的的商城内容
    });
    
    var context = $(".shop_list").html();
    var contexttiku = $(".shop_list .normal-list").eq(0).html();
    var contextebook = $(".shop_list .normal-list").eq(1).html();
	//商城分类的点击事件
	$('body').on('click', '.nav-box li', function() {
		var s=[];
		$(this).addClass("active").siblings().removeClass("active");
		//$.each($(".normal-list"),function(index,item){		})
		if($(this).attr("data-model") == "tiku"){
			
			s = '<li page="1" class="normal-list">'+contexttiku+'</li>';
        	$(".shop_list").html(s);
		}else if($(this).attr("data-model") == "ebook"){
			s = '<li page="1" class="normal-list">'+contextebook+'</li>';
        	$(".shop_list").html(s);
		}else{
			$(".shop_list").html(context);     	
		}

	})
	
	//主类左侧栏的点击事件
	$(".category_list .item .titles").click(function(){
		var _this = $(this);
		$(".scroll_lists").removeClass("none");//显示右侧内容
		$(".id_exam_list .navbox").hide();//隐藏三级项目分类
		$("#shop_index .nav-box").hide();//隐藏商城分类
		$("#shop_index .searchlist-normal").hide();//隐藏商城内容
		$(".item.active li i").removeClass("pointsred");//初始化之前选中过的红点
		$(this).parent().addClass("active").siblings().removeClass("active");
		$(".category_list .item .titles").removeClass("crt");
		$(this).addClass("crt");
		$(".item ul").hide();
		$(".item.active ul").show();
		arrData(_this.next().children().children("span"),"","");
		var a = _this.next().children().children("i").attr("data-modle");
		//var _a = _this.next().children().children("span").text();
		if(!isNull(a)){//判断是否有三级分类
			//arrData(_this.next().children().children("span"),"",_a);//显示包括三级分类		
			dataSj(_this);
		}
		//全部点击的判断事件
		if(_this.text() == "全部"){
			//放入已有的全部数据
			dataSj();
		}
	})
	
	function dataSj(_this){
		var _a , _s ;var arr = new Array();
		$.each($(".points"), function(index,items) {
			_a = $(".points").eq(index).attr("data-modle");
			if(!isNull(_a)) {//判断添加的三级分类 
				_s = $(".points").eq(index).next().text();//查出三级分类 的 内容，添加分类的数据
				arr.push(_s + "(中医)");
				arr.push(_s + "(西医)");
				arr.push(_s + "(中西医)");
			}
		});
		arrData($(".category_list .item li span"),"",arr);//arr添加的数据放入方法中循环
		
		//data数据是判断左侧除全部外的主类点击事件
		if( !isNull(_this) ){
			
			arr.length = 0;//数组清空避免上面的 代码影响下面
			$.each(_this.next().children().children("i"), function(index,items) {//判断点击的主类下面有几个副类
				
				_a = _this.next().children().children("i").eq(index).attr("data-modle");//判断每个下面的副类是否有三级类
				if(!isNull(_a)) {//判断添加的三级分类
					_s = _this.next().children().children("i").eq(index).next().text();//查出三级分类 的 内容，添加分类的数据
					arr.push(_s + "(中医)");
					arr.push(_s + "(西医)");
					arr.push(_s + "(中西医)");
				}
				
			});
			arrData(_this.next().children().children("span"),"",arr);
		}
	}
	
	//副类左侧栏的点击事件
	$(".category_list .item li").click(function(){
		var _this = $(this),_w = 0,_s = [];
		$(".scroll_lists").removeClass("none");//显示右侧内容
		$(".id_exam_list .navbox").hide();//隐藏三级项目分类
		$("#shop_index .nav-box").hide();//隐藏商城分类
		$("#shop_index .searchlist-normal").hide();//隐藏商城内容
		$(".item.active li i").removeClass("pointsred");
		_this.children("i").addClass("pointsred");//增加当前红点样式
		arrData(_this.children("span"),"","");//添加右栏位数据
		
		var a = _this.children("i").attr("data-modle");
		var _data =  _this.children("span").text();
		if(!isNull(a)){//判断是否有三级分类
			
			$(".id_exam_list .navbox").show();
			$("#shop_index .third_list li").each(function(){
				_w += $(this).outerWidth() + 2;
			})
			$("#shop_index .third_list").width(_w);//设置滑动宽度
			$('#shop_index .navbox').scrollLeft(0);
			_s += '<li class="active">全部</li>'
					+'<li>'+_data+'(中医)</li>'
					+'<li>'+_data+'(西医)</li>'
					+'<li>'+_data+'(中西医)</li>';
			$(".third_list").html(_s);//点击当前数据的时候切换内容
			arrData($("#shop_index .third_list li"),"","");//显示包括三级分类
		}
		//点击栏位的时候三级分类选项初始化到全部
		$("#shop_index .third_list li").eq(0).addClass("active").siblings().removeClass("active");
	})
	
	// 打开估分
    $('body').on('click', '#shop_index .gufen_box', function() {
        var _this = $(this);
        if (_this.hasClass('active')) {
            if (isNull(sessionStorage.gufen_box)) {
            	
                $('.first_foot').actionSheet('open');
                setTimeout(function() {
                    $('.first_foot .head').addClass('scaleDraw');
                    $('.first_foot .foot').addClass('offset');
                    $('.first_foot .gufen_img').attr('src', 'img/fugen.gif');
                    setTimeout(function() {
                        gufen_showText($('.first_foot .item'), '0');//页面数字分析中
                    }, 800);
                }, 300);
            } else {
                $('.sale_shop').actionSheet('open');
            }

        } else {
            _this.addClass('active');
        }
        sessionStorage.scene = '智能估分';
    });
    
    
    function gufen_showText(item, item_nums) {
    	
    	$(item[item_nums]).addClass('active').find('.rightsa').text('分析中');
	    setTimeout(function() {
	        $(item[item_nums]).removeClass('active').find('.rightsa').html('<i class="icon-checkoff"></i>');
	        item_nums ++;
	        if (item_nums < '5') {
	            gufen_showText(item, item_nums);
	        } else {
	            $('.first_foot').actionSheet('close');
	            $('.second_foot').actionSheet('open');
	            setTimeout(function() { 
	                $('.second_foot .middle').addClass('offset');
	            }, 300);
	        }
	    }, 900);
	}
    
	function isNull(obj){
    if(typeof obj == "undefined" || obj == null || obj == ""){
	        return true;
		}else{
			return false;
		 }
	 }
	
	//吧数据分合成数组的形式在一个个的放入数据
	function arrData(data,dataTwo,dadaThree){
		var arr = new Array();
		$.each(data, function(index,item) { 
			arr.push(data.eq(index).text());
		});
		$.each(dataTwo, function(index,item) {
			arr.push(dataTwo.eq(index).text());
		});
		$.each(dadaThree, function(index,item) {
			arr.push(dadaThree[index]);
		});
		inforData(arr);
	}
	
	function inforData(data){
		var s = [];
		$(".scroll_lists").empty();
		$.each(data, function(index,item) {	//下次用each输出吧，别用for了，for in 也算了吧
			if(item == "全部")item = $(".pointsred").next().text();//判断三级类点击全部的时候显示二级名
			if(item == "")return;
			s+='<li class="list_li">'
					+'<a href="javascript:;" data-cid="111"><p>'+item+'</p>'
						+'<div class="tags">'
							+'<span data-model="goods">小抄</span>'
							+'<span data-model="exam">套卷</span>'
							+'<span data-model="tiku">题库</span>'
							+'<span data-model="video">视频</span>'
							+'<span data-model="ebook">考点</span>'
						+'</div>'
					+'</a>'
				+'</li> '
			$(".scroll_lists").html(s);
			
		});
	}
		
	</script>
	</body>
</html>
